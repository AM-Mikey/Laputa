Reviewed and accurate as of 8/9/25

--- General ---
-clean up [var disabled] in various scripts
-subpixel jittering on characterbodies (especially juniper)
-consider using typed variables (:=) to improve performance and reduce confusion

--- Level ---


--- Background ---
-having a background smaller than camera size will reset to another camera size (square? taking horz?) (unconfirmed)
-fix background scroll
-add backgrounds
-we have to save as resource to save our changes to bk!!
-animated bk not working in editor
-back_tile_mode repeat not long enough for ultrawide
-add layer horizontal offsets (for if we want the layer to start earlier because it doesnt tile)

--- animation ---
-add backrun crouch animations (low priority)
-add stand animation without wind for indoors
-adjust recent shot time (?)
	>jumping then insta shoot down (?)


--- enemy ---
-move hurt sounds to _on_hit() per enemy for custom sounds
-check to make sure enemy scripts arent shadowing phys_process and instead use _on_physics_process
-fix junior's state machine
-update waypoint based enemies to the new waypoint system npcs use
-update chasing enemies to use a_star system spider uses
-update any enemy that's x or y size is 16px to be smaller to fit through gaps
-consider changing enemy collision shapes on animate?
-attached stalagtites sometimes dont do damage when swiped from the side
	>- Climber -<
		-possible to shoot so multiple arms fall, and the head with continue to rotate without arms
		-add animation


--- pickup ---


--- Editor ---
-check cases where saving does not save level
-clean up all setup and exit code
-editor calls setup_level on change level, but does not exit or get removed
-pressing x somehow counts as clicking handles on resizable boxes?
-reimplement level notes
-fix grab regions on enemies/npcs

	>- Tile -<
		- add stroke grouping, to start implementing undo/redo (low priority)

	>- Tileset -<
		-test swap position and swap tiles options (warning destructive!)

	>- Enemy -<
		-add delete all enemy spawns button
		-enemy spawners do not have their properties updated when their enemy scripts are changed (MAJOR)
	>- Triggers -<
		-add spawn preview
		-color of trigger spawn will not update on inspector change
	>- Inspector -<
		-editorlevellimiter load button (background_resouce) is likely bugged
		-add control c/v support
		-change property order from alphabetical to order in script




--- Effect ---
-add first time load wipe in(?)
-add level up/down graphics
-add out of ammo animation
-add explosion effect
-differentiate player and enemy damage numbers

--- Gun ---
-long term problem with gun sprites with stocks, should they go over or under juniper?
-finish work on turnstyle jumper
-grenades sometimes crash the game with collisions
-consider restoring ammo on level up

--- Bullet ---
- blunderbuss finish transfer to buckshot sprites/particles and icon
- standardize which bullets bounce on SSP



--- Player ---
-add 8dir gun
	>flamethrower?
-fix ladder state generally
-fix footstep sound code triggering when it's not supposed to
-plan if satisfying movement combos can be added
-not actually entering knockback state when knockback. investigate this
-bonking on angled ceilings gives us velocity, only while stationary. investigate if this is good or not
-migrate disabled code to can_input (consider not using disabled anymore)
-for edge and edge_turn animations, juniper's collisionshapes are innacurate. consider at least updating his hurtbox

	>- Animation -<
		-knockback hurt animation?
		-bonk animation?
		-turn around animation?
		-almost everything needs blend frames
		-slope 1:2 1:1 2:1 stand animations



--- Tile ---
	>- Animation System -<
		-make sure animation accounts for remapping tiles in editor>tileset
		-new animation node per tileset, autoload it in on level(?)
		-fix erased tiles sometimes returning and be animated on certain frames (resolves on reload)
	>- Autotile -<
		-finish implementing

--- Trigger ---
-fix trigger sizes changing on signs on load
-sign spawns weird, check others
-prevent spikes from triggering on the side (could shrink them)
-enable shooting on ladders
-consider force drop off ladders on damage
-allow drop through semisolid platform if there is a ladder


--- UI ---
-fix level preview on main menu and update non-titlescreen-skip menu code
-update themes, move them and remove unused ones

	>-- hud --<
	-hud seems to break size on run in game. it does not in windowed/fullscreen. this is probably a conflict with out window resizer in world
	-flash max on max xp pickup
	-make transparency use canvasgroup, so its all transparent at once
	-weaponwheel fixeswhe
	-make hp and xp bar do a fill up animation on game or level start (to be consistant with recharge bar)



--- Save/Load ---







Luka's Current Goals

--text--
unable to run commands at end of line
reimplement text choices
draw juniper responce choice
dialog box shake effect

--animation--
2:1 slope slide animation
jumiper's starting animation seems to be edge?

grabbing an enemy in editor can get the editor stuck in selecting and not go back to tile mode until the tab is clicked
upgrade ssp shoot check to raycast
juniper's gun pos doesnt change when going from one of the edge animations (try left facing) to a jump (try right facing)
lower other boxes along with just the sprite

add logic to use edge animations at the peak of a "mountain" shape

add animation for when jumping up to a platform edge (opposite edge animation)
remove run frame in between edge and edge turn (by adding raycasts)
recovering from edge turn animation earlier on platform
REQUIRED - add a second set of checks for slopes (halfway) so that it doesnt mistake leaning off the edge onto a half slab as a slope


--juniper physics --
falling into a \| shaped pit causes our velocity to build infinitely

juniper set all states to
	pc.floor_max_angle = 0.8
	pc.safe_margin = 0.008 #IMPORTANT this still causes safe margin floating at 3x res. setting it to 0.0001 fixes but that breaks all physics. consider if anything else can fix the jitter as well
								#SOLUTION snap juniper to ground so that he scales properly with world
	consider adding snap to ground so we dont fall when going downhill 45*

MAJOR - update all characterbodies to safe_margin of around 0.008  to prevent pixel jitter (and monitor if this changes anything)


sometimes the yn or option dialog gets cut off when speeding dialog ahead
consider having unknown topics greyed out so that players are incentivised to go collect them in the world


juniper animation ---
move arm gun up for left stand animations
move shoot right up slope gun so it doesnt instafizzle on slight slope

-observe +tweak hitbox changes
-observe save/load and identify issues
-reconsider pc -> get_pc_or_null()
-consider autoload for saveload code
-half walls tend to cause issues with push
-moving from 45 to slightslo

various glitches when moving up and down slopes, when going from edge to backedge

### SAVELOAD ###
-rename settings and options to be more clear
-settings save/load update code (have it write if there is no file to read from)
-settings is writing data many more times than it needs to. have it wait until all data is collected
-all of juniper's guns show on load

-reimplement limited triggers (consider adding trigger amount of times possible)



#dogtown

make lilypad into prop
make ssp raycast

migrate other nodes to use f.pc()

add prop spawns
migrate prop to characterbody2d

move spawns from spawns to individual spawn layers

rename bullets




PHYSICS CHANGES TO JUNIPER

																						-evaluate jump height changes -> done
																						-evaluate cof changes -> 0.15

-evaluate acceleration changes -tbd, only feels good with these air cof settings


																						-evaluate turnaround speed changes -> approved
																						-evaluate air cof -> verified 0.02
																						-make push out code not trigger on left or right being held
-edit heart and ammo time pop
-enemy knockback evaluation
																						-evaluate iframe time -> verified 1.5
																						-evaluate jump min height -> good
-evaluate min direction removal -tbd, this allows much more air maneuvering
-evaluate other code changes
																						-evaluate coyote time sound and migrate to debug or is_debug
																						-change collision box to be smaller on bottom corners
																						-evaluate ceiling angles
																						-evaluate camera smoothing speed -> good


- 45 degree slope push bug
																						-write extra code to snap juniper to the nearest 0.00 height
																						-ssp raycast detection
-add debug levelup multiplier rate feature
-evaluate controller/analog input
-cleanup longjump
-45* ceiling slope bug
-tear out and replace previous ssp detection code


-animation code updates

-need system to move to different animation based on previous animations + conditions
-has system to control which animations sync (groups)
-need system to insert transition animations (while keeping animation group sync)
-sort out edge cases and where new animations are needed
-sort out height setting
-fix false raycast detection from world by using a raycast start point air check
-fix push slightslope -> slightslope

-transition upslope, upslightslope -> frontedge, edgeturn
-transition edge -> downslope, downslightslope
-transition frontedge, edgeturn -> stand
-


-trans stand, all slopes -> run

run to run on slope with 0 run animation offset has a sudden jump (see C:\Users\Luka\Documents\ShareX\Screenshots\2025-10\TabTip_Rc8s8MIQeT.mp4)

get peak animation working, slightslopeup-> nothing, slightslopeup -> slightslopedown, slopeup -> slopedown in terms of geometry


-clean up options ui look
-keyconfig doesnt work
-controllerconfig doesnt work

project settings should represent the player's chosen input map? or what? resolve this conflict


NEEDED ANIMATIONS:

-forbid crouch while on slope, simplifies some issues



MAJOR CODE AREAS:

+ Enemy base code
	- Individual enemies
++ Pickups
- NPC base code
-- Boss code (not started)
-- Vehicle code (not started)
+ Audio System
~ Parallax Backgrounds
+ Bullet Base code
~ Dialog code
~ Level editor (major area)
~ Individual effects
+ Gun base code
- Items (collectables for story prog) and Inventory
+ Player physics and statemachine
~ Player animation (my current focus)
- Props (ingame visual + code bundles)
- Tile Animation (started)
~ Tilemap (needs conversion to tilemaplayers)
~ Triggers (invisible zones with code)
~ UI coding (leave this mostly to me or crystalwarrior)




Run animation fixes:
	- fix peak where at least half is a 2:1 slope
	- fix valley where at least half is a 2:1 slope
	- don't push when holding direction lock the opposite direction to the push



Crouch Triggering:
	- crouch is sometimes triggered, sometimes not triggered, and sometimes triggered but doesnt change hitbox


Transition frame Candidates:

	- up_slope -> edge_front





Dialog CHANGES

-talk animations for npcs




Input Map Changes

 -configure presets & reset
 -make presets as files
 -update preset graphics
 -prevent mapping keys to same buttons
 -to keep consistancy with game behavior, we need to lock down menu accept, menu cancel, inspect to their associated buttons
 -jump on hold setting



Remapping TODO:

adjust deadzone when adding new inputs. it seems like 0.5 for digital and 0.0 for analog because we do deadzone for analog internally
kb inputs via mouse
	-prevent same input multiple actions
		-define important actions that are not doubled
		-combination inputs like ui_text_carat_left are unnaccounted for as they won't be used in game anyways
		-define actions that are doubled from important ones (i.e. ui inputs)
		-fix reset
		-fix presets
	-add confirm to replace old inputmap with new inputmap


kb inputs via controller
controller inputs via mouse
controller inputs via controller
check controller axis is done properly
check l2 and r2 analog work properly (since it goes from 0 to 1 not -1 to 1)
make sure controller or kb input doesnt conflict with window focus


allow dpad to be remapped, but must be disabled
allow left stick to be remapped, but must be disabled
analog stick mapping seems to hate Y axis
red does not clear on confirm on controller
add clear button to input maps

make ui accept and deny rebind after confirm on controller



PROPS TODO:

add number that shows the level of actorspawns that are enemies
fix filedialog override and lineeditoverride to be updated with whichever the ui accept cancel is etc
add debug print show cursor position in tile and exact position
trigger spawn previews
prop spawn previews
move actors over to EditorArea
chestweapon sparkles
only allow one prop when investigating(?)

add gun get screen
add item get screen
clean up inventory
make max gun count six
make gun locker prop


fix save load to go off of name
fix level name when instantiating level
check if save data is valid for version of level, maybe

look into why game creates save file when changing level


#new
add bg visibility


next todo:
add items
add secondary tab inventory: quests, dialog topics, then topic descriptions